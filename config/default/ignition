variant: fcos
version: 1.3.0
ignition:
  config:
    merge:
      - source: http://45.86.152.1/ipxe/passwd.json
      - source: http://ipxe-service.local.ns1.fra3.infra.onmetal.de/ignition/utils
      - source: http://ipxe-service.local.ns1.fra3.infra.onmetal.de/ignition/inventory
storage:
  files:
    - path: /etc/hostname
      overwrite: yes
      mode: 0644
      contents:
        inline: |
          fra3-compute-16
    - path: /opt/onmetal-install/partitions
      overwrite: yes
      mode: 0755
      contents:
        inline: |
          label: gpt
          type=C12A7328-F81F-11D2-BA4B-00A0C93EC93B, name="EFI", size=512MiB
          type=0FC63DAF-8483-4772-8E79-3D69D8477DE4, name="ROOT"
    - path: /etc/fstab
      overwrite: yes
      mode: 0644
      contents:
        inline: |
          LABEL=ROOT      /               ext4            errors=remount-ro 0     1
          LABEL=EFI       /efi            vfat            umask=0077      0       1
    - path: /opt/onmetal-install/target
      overwrite: yes
      mode: 0755
      contents:
        inline: |
          disk=/dev/nvme0n1
    - path: /etc/resolv.conf
      overwrite: yes
      mode: 0644
      contents:
        inline: |
          nameserver 8.8.8.8
    - path: /etc/apt/sources.list
      overwrite: yes
      mode: 0644
      contents:
        inline: |
          # Gardenlinux Repo
          deb https://repo.gardenlinux.io/gardenlinux dev main
          # Debian Repo for backup
          deb https://deb.debian.org/debian bookworm main
          deb https://security.debian.org/debian-security bookworm-security main
          deb https://deb.debian.org/debian bookworm-updates main
